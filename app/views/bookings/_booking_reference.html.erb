<% if @booking %>
  <% user = @booking.user|| @booking.unregistered_user %>
  <%= render partial: "modals/edit_reservation_modal", locals: {booking: @booking} %>
  <h3 class="ui top attached header">

    Booking #<%= "#{@booking.reference_number} -#{user.first_name} #{user.last_name}" %>
  </h3>
  <div class="ui attached segment">
    <p><h4>Departing Airport: </h4><%= @booking.flight.route.departing_airport.name %></p>
    <p><h4>Arriving Airport: </h4><%= @booking.flight.route.arriving_airport.name %></p>
    <p><h4>Number of passengers: </h4><%= @booking.passengers.count %> <button class="custom-button" onclick="showPassenger()">View</button></p>
    <p><h4>Departure Date: </h4> <%= @booking.flight.date.strftime("%B %d, %Y") %> </p>
    <p><h4>Total Flight Fare: </h4> $<%= estimate_flight_fare(@booking.passengers) %></p>
    <div class="ui center aligned grid">

    <div class="ui buttons">
      <button class="ui basic red button" id="cancel-reservation" onclick="deleteBookingReservation('<%= @booking.reference_number %>')">Cancel Reservation</button>
      <div class="or"></div>
      <button class="ui positive button" onclick="editReservation()">Edit Reservation</button>
    </div>
      
    </div>
  </div>
<% else %>
  <div class="ui message">
    <div class="header">
      No record Found
    </div>
    <p>We have searched our records and no booking reference number matches <b> <%= @reference_number %> </b> </p>
  </div>
<% end %>


